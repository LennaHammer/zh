

安装


```bash
pip3 install filelock
pip3 install torch torchvision
pip3 install pandas dask numpy sympy

pip3 install nltk spacy
pip3 install sqlalchemy
pip3 install requests_html beautifulsoup4 lxml
pip3 install 
pip3 install 
pip3 install regexp

pip3 install pillow
pip3 install networkx
```

python 爬虫
- 用 request 或者 requests_html
- 请求头
- cookie 会变化，通常用来防止爬虫。属于 http 协议，不需要 js 支持。这个 request 支持，用 session。
- bs4 用 lxml 能解析一些出错的 html。
- 注意检查文件长度，和文件头对比。 response.headers.get("Content-Length"))
- 原子写
- 并行
- 模拟浏览器，用。性能不好。
- 注意设置超时时间，否则会一直卡住。
- 注意偶尔会得到异常数据。检查内容。
- 请求头格式不要传 br 否则 requests 不能自动解压缩。


apt install apt-xapian-index 用来给 提供搜索功能
snap install 



python redis


java

- spring 全家桶
  - pom.xml（Maven 项目）
- springboot 可以替代 xml
  - 配置文件 application.properties `server.port=8080`
  - 运行 `mvn spring-boot:run`
- Spring MVC
  - 为什么java喜欢用RequestBody接收json数据，而不用RequestParam接收k/v？
  - 分三层，控制器，服务，数据。
- 连接数据库可以用 
  - jdbcTemplate 拼接字符串。
  - mybatis 可以写 sql
  - JPA 是 ORM
- 其他功能
  - 定时任务
  - 缓存
  - 队列，线程池
  - 


```java
import org.springframework.boot.*;
import org.springframework.boot.autoconfigure.*;
import org.springframework.web.bind.annotation.*;

@SpringBootApplication
public class DemoApplication {
    public static void main(String[] args) {
        SpringApplication.run(DemoApplication.class, args);
    }

    @RestController
    class HelloController {
        @GetMapping("/hello")
        public String hello() {
            return "Hello, Spring Boot (One File, No Maven)!";
        }
    }
}

```


```yaml
version: '3.8'
services:
  mysql:
    image: mysql:8.0
    container_name: mysql
    restart: unless-stopped
    environment:
      MYSQL_ROOT_PASSWORD: your_password
      MYSQL_DATABASE: myapp
      MYSQL_USER: appuser
      MYSQL_PASSWORD: app_password
    ports:
      - "3306:3306"
    volumes:
      - mysql_data:/var/lib/mysql
    command: --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci
volumes:
  mysql_data:
```



docker
- 启动 `docker run -it ubuntu bash` 用 `--name <container_name>` 指定名称
- 执行命令 `docker exec -it mycontainer bash`
- docker-compose 启动命令 `docker-compose up -d` 可以一次启动多个容器
- 其他工具 清理 `docker-clean`


MySQL
- 安装 MySQL `sudo apt install -y mysql-server`
  - 配置用户和密码 `ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'root';` 密码比如 `wegWweg82.asdg`
  - 远程访问需要设置用户和密码。如果有的话还需要设置防火墙。
- 登录 MySQL `sudo mysql -u root -p` 也可以用图形客户端
- 字符编码 utf8mb4
- 主键 `id INT AUTO_INCREMENT PRIMARY KEY`
- 查询的时候注意索引。分页用 where 不要用 offset。
- 客户端工具 mysql-workbench，dbeaver-ce, HeidiSQL, datagrip
- 备份 `mysqldump -u 用户名 -p 数据库名 > backup.sql` 可以设置定时备份 `> /backup/`date +\%F`.sql`
- 主从，读写分离，往往是一写多读，注意同步。分库分表。
  - 使用 mysql 的主从复制（Replication）。
  - 可以在应用层实现，也可以使用中间件。
- 用 docker 
  - 运行容器: `docker run -d --name mysql-dev -p 3306:3306 -e MYSQL_ROOT_PASSWORD=你的密码 -v mysql_data:/var/lib/mysql mysql:8.0`
  - 连接 MySQL: `docker exec -it mysql-dev mysql -u root -p`
- 补充 
  - 早期版本（5.0 之前）的 SQL 语法不一样。
  - 不设置外键约束，放到代码中处理。


redis
- 安装 `sudo apt install redis-server`
- 客户端 `redis-cli`
  - 基本命令 `SET mykey "Hello"` `GET mykey` `EXISTS mykey`
- 最简单的情况是当作可以 k-v 数据库，用来作为缓存，可以设置超时时间。
- 做消息列队无法保证可靠性。
- 案例，秒杀



前端
- jquery
- react
- vue
- 界面库


python 连接数据库

sqlalchemy
- 连接 sqlite3 `engine = create_engine(f"sqlite:///db.sqlite3")`


```python
from sqlalchemy import create_engine

# 连接字符串：mysql+pymysql://<用户名>:<密码>@<数据库地址>:<端口>/<数据库名>
# 这里假设 MySQL 运行在本地，端口是 3306，数据库名为 test_db
engine = create_engine('mysql+pymysql://your_username:your_password@localhost:3306/your_database')

```

redis

```python
import redis

# 创建 Redis 连接
r = redis.Redis(host='localhost', port=6379, db=0)

# 设置 Redis 数据
r.set('foo', 'bar')

# 获取 Redis 数据
value = r.get('foo')
print(value.decode('utf-8'))  # 输出 'bar'
```

python 的 web 框架 flask, fastapi，django



分布式计算

dask
- 代替 pandas `import dask.dataframe as dd` 注意不能原地修改，注意 IO 性能消耗会非常非常大。
- 代替 mapreduce  `import dask.bag as db` 可以使用 map 来并行。



Ruby on Rails 

- 新建 Rails 项目 `rails new myapp` 然后 `cd myapp`
- 初始化数据库 bin/rails db:create
  - 创建数据表/模型 `bin/rails generate model User name:string email:string`
  - 执行数据表修改 `bin/rails db:migrate`
- 启动开发服务器 `bin/rails server`
- 在 Rails 里创建页面，按照：模型 → 路由 → 控制器 → 视图。
  - 创建控制器 `bin/rails generate controller Users`
- 页面支持 CRUD 增查改删 
  - 通常写操作需要用户权限
- 开发工具 JetBrains RubyMine
- 书籍 《Agile Web Development with Rails》
- 其他
  - 修改数据表 `bin/rails generate migration AddAgeAndPhoneToUsers age:integer phone:string`
  - 创建首页 `bin/rails generate controller Home index` 然后设置路由 `root "home#index"`。
- 前端，也可以使用 React
- 示例项目 Mastodon

路由 `config/routes.rb`
```ruby
Rails.application.routes.draw do
  get "users", to: "users#index"
  root "home#index"
end
```

控制器 `app/controllers/users_controller.rb`
```ruby
class UsersController < ApplicationController
  def index
    @users = User.all
  end
end
```

视图模板 `app/views/users/index.html.erb`
```ruby


```


正则表达式

匹配中文

```python
import regex as re
re.search(r'\p{Han}+',"apple苹果")
```


微调
- Finetune GPT-2 with LoRA https://nn.labml.ai/lora/experiment.html




